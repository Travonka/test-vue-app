import{e as E,r as n,b as k,x as F,c as p,f as e,g as P,E as M,j as f,v as g,t as x,n as w,L as T,o as y}from"./vendor-BrhbkY3s.js";import{u as $,d as z}from"./index-B0pOHW19.js";const D={class:"space-y-8"},J={class:"bg-white rounded-lg shadow-sm border border-gray-200"},G={class:"flex items-center space-x-6"},O={class:"flex-shrink-0"},I=["src","alt"],L={class:"block"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},q=["disabled"],H=["disabled"],K={class:"flex justify-end"},Q=["disabled"],W={class:"bg-white rounded-lg shadow-sm border border-gray-200"},X=["disabled"],Y=["disabled"],Z=["disabled"],ee={class:"flex justify-end"},se=["disabled"],te={class:"bg-white rounded-lg shadow-sm border border-gray-200"},oe={class:"p-6 space-y-6"},re={class:"flex items-center justify-between"},le={class:"flex items-center justify-between"},ae={class:"bg-white rounded-lg shadow-sm border border-red-200"},de={class:"p-6"},ne={key:0,class:"fixed bottom-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg"},ie={key:1,class:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg"},ue={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},me={class:"bg-white rounded-lg p-6 max-w-md mx-4"},fe={class:"flex space-x-4"},ve=E({__name:"Settings",setup(be){const u=$(),m=n(!1),i=n(!1),v=n(!1),b=n(""),c=n(""),o=n({fullName:"",email:"",avatar:""}),r=n({currentPassword:"",newPassword:"",confirmNewPassword:""}),a=n({emailNotifications:!0,darkMode:!1,language:"ru"}),h=n({...o.value}),_=k(()=>"https://ui-avatars.com/api/?name="+encodeURIComponent(o.value.fullName||"Пользователь")+"&background=3B82F6&color=fff"),S=k(()=>JSON.stringify(o.value)!==JSON.stringify(h.value)),U=k(()=>r.value.currentPassword&&r.value.newPassword&&r.value.newPassword===r.value.confirmNewPassword&&r.value.newPassword.length>=8),d=(l,s)=>{s==="success"?(b.value=l,c.value=""):(c.value=l,b.value=""),setTimeout(()=>{b.value="",c.value=""},5e3)},V=async l=>{var N;const t=(N=l.target.files)==null?void 0:N[0];if(t){if(t.size>5*1024*1024){d("Файл слишком большой. Максимальный размер: 5MB","error");return}try{const C=await z.uploadAvatar(t);o.value.avatar=C.avatarUrl,d("Фото профиля обновлено","success")}catch{d("Ошибка загрузки фото","error")}}},j=async()=>{m.value=!0;try{await u.updateProfile({fullName:o.value.fullName,email:o.value.email,avatar:o.value.avatar}),h.value={...o.value},d("Профиль обновлён","success")}catch{d("Ошибка обновления профиля","error")}finally{m.value=!1}},A=async()=>{i.value=!0;try{await new Promise(l=>setTimeout(l,1e3)),r.value={currentPassword:"",newPassword:"",confirmNewPassword:""},d("Пароль изменён","success")}catch{d("Ошибка изменения пароля","error")}finally{i.value=!1}},B=async()=>{try{await new Promise(l=>setTimeout(l,1e3)),await u.logout(),d("Аккаунт удалён","success")}catch{d("Ошибка удаления аккаунта","error")}v.value=!1};return F(()=>{u.user&&(o.value={fullName:u.user.fullName,email:u.user.email,avatar:u.user.avatar||""},h.value={...o.value})}),(l,s)=>(y(),p("div",D,[e("div",J,[s[14]||(s[14]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Профиль"),e("p",{class:"text-sm text-gray-500"},"Управляйте информацией вашего профиля")],-1)),e("form",{class:"p-6 space-y-6",onSubmit:M(j,["prevent"])},[e("div",G,[e("div",O,[e("img",{src:o.value.avatar||_.value,alt:o.value.fullName,class:"h-20 w-20 rounded-full object-cover border-4 border-gray-200"},null,8,I)]),e("div",null,[e("label",L,[s[10]||(s[10]=e("span",{class:"sr-only"},"Выбрать фото профиля",-1)),e("input",{type:"file",accept:"image/*",onChange:V,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),s[11]||(s[11]=e("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG до 5MB",-1))])]),e("div",R,[e("div",null,[s[12]||(s[12]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"}," Полное имя ",-1)),f(e("input",{id:"fullName",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>o.value.fullName=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:m.value},null,8,q),[[g,o.value.fullName]])]),e("div",null,[s[13]||(s[13]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email адрес ",-1)),f(e("input",{id:"email",type:"email","onUpdate:modelValue":s[1]||(s[1]=t=>o.value.email=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:m.value},null,8,H),[[g,o.value.email]])])]),e("div",K,[e("button",{type:"submit",disabled:m.value||!S.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},x(m.value?"Сохранение...":"Сохранить изменения"),9,Q)])],32)]),e("div",W,[s[18]||(s[18]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Изменить пароль"),e("p",{class:"text-sm text-gray-500"},"Обеспечьте безопасность вашего аккаунта")],-1)),e("form",{class:"p-6 space-y-6",onSubmit:M(A,["prevent"])},[e("div",null,[s[15]||(s[15]=e("label",{for:"currentPassword",class:"block text-sm font-medium text-gray-700"}," Текущий пароль ",-1)),f(e("input",{id:"currentPassword",type:"password","onUpdate:modelValue":s[2]||(s[2]=t=>r.value.currentPassword=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:i.value},null,8,X),[[g,r.value.currentPassword]])]),e("div",null,[s[16]||(s[16]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"}," Новый пароль ",-1)),f(e("input",{id:"newPassword",type:"password","onUpdate:modelValue":s[3]||(s[3]=t=>r.value.newPassword=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:i.value},null,8,Y),[[g,r.value.newPassword]])]),e("div",null,[s[17]||(s[17]=e("label",{for:"confirmNewPassword",class:"block text-sm font-medium text-gray-700"}," Подтвердите новый пароль ",-1)),f(e("input",{id:"confirmNewPassword",type:"password","onUpdate:modelValue":s[4]||(s[4]=t=>r.value.confirmNewPassword=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:i.value},null,8,Z),[[g,r.value.confirmNewPassword]])]),e("div",ee,[e("button",{type:"submit",disabled:i.value||!U.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},x(i.value?"Изменение...":"Изменить пароль"),9,se)])],32)]),e("div",te,[s[23]||(s[23]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Настройки"),e("p",{class:"text-sm text-gray-500"},"Персонализируйте ваш опыт обучения")],-1)),e("div",oe,[e("div",re,[s[19]||(s[19]=e("div",null,[e("h3",{class:"text-sm font-medium text-gray-900"},"Email уведомления"),e("p",{class:"text-sm text-gray-500"},"Получать уведомления о новых курсах и обновлениях")],-1)),e("button",{type:"button",onClick:s[5]||(s[5]=t=>a.value.emailNotifications=!a.value.emailNotifications),class:w(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",a.value.emailNotifications?"bg-blue-600":"bg-gray-200"])},[e("span",{class:w(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a.value.emailNotifications?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",le,[s[20]||(s[20]=e("div",null,[e("h3",{class:"text-sm font-medium text-gray-900"},"Тёмная тема"),e("p",{class:"text-sm text-gray-500"},"Включить тёмную тему интерфейса")],-1)),e("button",{type:"button",onClick:s[6]||(s[6]=t=>a.value.darkMode=!a.value.darkMode),class:w(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",a.value.darkMode?"bg-blue-600":"bg-gray-200"])},[e("span",{class:w(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a.value.darkMode?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",null,[s[22]||(s[22]=e("label",{for:"language",class:"block text-sm font-medium text-gray-700"}," Язык интерфейса ",-1)),f(e("select",{id:"language","onUpdate:modelValue":s[7]||(s[7]=t=>a.value.language=t),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},s[21]||(s[21]=[e("option",{value:"ru"},"Русский",-1),e("option",{value:"en"},"English",-1),e("option",{value:"es"},"Español",-1)]),512),[[T,a.value.language]])])])]),e("div",ae,[s[24]||(s[24]=e("div",{class:"p-6 border-b border-red-200"},[e("h2",{class:"text-lg font-medium text-red-900"},"Опасная зона"),e("p",{class:"text-sm text-red-600"},"Необратимые действия с вашим аккаунтом")],-1)),e("div",de,[e("button",{onClick:s[8]||(s[8]=t=>v.value=!0),class:"px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Удалить аккаунт ")])]),b.value?(y(),p("div",ne,x(b.value),1)):P("",!0),c.value?(y(),p("div",ie,x(c.value),1)):P("",!0),v.value?(y(),p("div",ue,[e("div",me,[s[25]||(s[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Удалить аккаунт?",-1)),s[26]||(s[26]=e("p",{class:"text-sm text-gray-600 mb-6"}," Это действие необратимо. Все ваши данные, прогресс и сертификаты будут удалены навсегда. ",-1)),e("div",fe,[e("button",{onClick:s[9]||(s[9]=t=>v.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Отмена "),e("button",{onClick:B,class:"flex-1 px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700"}," Удалить навсегда ")])])])):P("",!0)]))}});export{ve as default};
//# sourceMappingURL=Settings-CKy4kqGV.js.map
