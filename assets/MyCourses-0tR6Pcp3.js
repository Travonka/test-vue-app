import{e as I,r as c,b,x as K,c as l,f as t,F as M,s as N,n as j,m as h,g as y,t as r,h as L,w as D,i as O,K as R,l as q,o as n}from"./vendor-BLqVYaau.js";import{m as G,b as V,c as B,_ as H}from"./index-CEXCKPLT.js";const J={class:"space-y-6"},Q={class:"border-b border-gray-200"},U={class:"-mb-px flex space-x-8"},W=["onClick"],X={key:0,class:"flex justify-center py-12"},Y={key:1,class:"text-center py-12"},Z={key:2,class:"text-center py-12"},ee={class:"text-gray-500 mb-4"},te={key:0},se={key:1},oe={key:2},le={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"h-48 bg-gray-200 relative"},re=["src","alt"],ae={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},ie={key:2,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2"},de={class:"flex items-center justify-between text-xs"},ce={class:"w-full bg-gray-600 rounded-full h-1 mt-1"},ue={class:"p-6"},me={class:"flex items-center space-x-2 mb-2"},ge={class:"text-xs font-semibold px-2 py-1 bg-blue-100 text-blue-800 rounded-full"},pe={class:"text-xs text-gray-500"},_e={class:"text-xs text-gray-500"},ve={class:"font-semibold text-gray-900 mb-2 line-clamp-2"},xe={class:"text-sm text-gray-600 mb-4 line-clamp-3"},be={class:"flex items-center mb-4"},he=["src","alt"],ye={class:"text-sm text-gray-600"},fe={class:"flex items-center justify-between"},ke={class:"flex items-center space-x-1"},Ce={class:"text-sm text-gray-600"},we={class:"flex space-x-2"},$e=["onClick"],Pe=["onClick"],Me=I({__name:"MyCourses",setup(Ne){const m=q(),a=c("enrolled"),g=c(!0),p=c(null),u=c([]),_=c([]),v=c({}),E=b(()=>[{key:"enrolled",label:"Записан",count:u.value.length},{key:"in_progress",label:"В процессе",count:k.value.length},{key:"completed",label:"Завершён",count:_.value.length}]),f=b(()=>{switch(a.value){case"enrolled":return u.value;case"in_progress":return k.value;case"completed":return _.value;default:return[]}}),k=b(()=>u.value.filter(s=>{const o=v.value[s.id];return o&&o.progressPercentage>0&&o.progressPercentage<100})),S=s=>({frontend:"Клиентская часть",backend:"Серверная часть",ai_ml:"AI/ML",devops:"DevOps",data_science:"Наука о данных",design:"Дизайн",mobile:"Мобильная разработка",other:"Другое"})[s]||s,i=s=>v.value[s],T=s=>{if(s<60)return`${s}м`;const o=Math.floor(s/60),d=s%60;return`${o}ч ${d}м`},z=s=>{const o=i(s.id);if(o&&o.completedLessons.length>0){for(const d of s.modules)for(const e of d.lessons)if(!o.completedLessons.includes(e.id)){m.push(`/courses/${s.id}/lessons/${e.id}`);return}}m.push(`/courses/${s.id}`)},A=s=>{m.push(`/courses/${s.id}`)},C=async()=>{g.value=!0,p.value=null;try{await G(600),u.value=V.slice(0,3),_.value=V.slice(0,1),u.value.forEach(s=>{B[s.id]&&(v.value[s.id]=B[s.id])})}catch(s){p.value=s instanceof Error?s.message:"Ошибка загрузки курсов"}finally{g.value=!1}};return K(()=>{C()}),(s,o)=>{const d=O("router-link");return n(),l("div",J,[t("div",Q,[t("nav",U,[(n(!0),l(M,null,N(E.value,e=>(n(),l("button",{key:e.key,onClick:x=>a.value=e.key,class:j(["py-2 px-1 border-b-2 font-medium text-sm",a.value===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[h(r(e.label)+" ",1),e.count!==void 0?(n(),l("span",{key:0,class:j(["ml-2 py-0.5 px-2 rounded-full text-xs",a.value===e.key?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"])},r(e.count),3)):y("",!0)],10,W))),128))])]),g.value?(n(),l("div",X,o[0]||(o[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):p.value?(n(),l("div",Y,[o[1]||(o[1]=t("div",{class:"text-red-600 mb-2"},"Ошибка загрузки курсов",-1)),t("button",{onClick:C,class:"text-blue-600 hover:text-blue-700 text-sm font-medium"}," Попробовать снова ")])):f.value.length===0?(n(),l("div",Z,[t("div",ee,[a.value==="enrolled"?(n(),l("span",te,"Вы ещё не записаны ни на один курс")):a.value==="in_progress"?(n(),l("span",se,"У вас нет курсов в процессе изучения")):(n(),l("span",oe,"Вы ещё не завершили ни одного курса"))]),L(d,{to:"/courses",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},{default:D(()=>o[2]||(o[2]=[h(" Найти курсы ")])),_:1})])):(n(),l("div",le,[(n(!0),l(M,null,N(f.value,e=>{var x,w,$,P;return n(),l("div",{key:e.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},[t("div",ne,[e.thumbnail?(n(),l("img",{key:0,src:e.thumbnail,alt:e.title,class:"w-full h-full object-cover"},null,8,re)):(n(),l("div",ae," 📚 ")),i(e.id)?(n(),l("div",ie,[t("div",de,[t("span",null,r(Math.round(((x=i(e.id))==null?void 0:x.progressPercentage)||0))+"% завершено",1),t("span",null,r(T(((w=i(e.id))==null?void 0:w.timeSpent)||0)),1)]),t("div",ce,[t("div",{class:"bg-blue-400 h-1 rounded-full",style:R({width:`${(($=i(e.id))==null?void 0:$.progressPercentage)||0}%`})},null,4)])])):y("",!0)]),t("div",ue,[t("div",me,[t("span",ge,r(S(e.category)),1),t("span",pe,r(e.duration)+" мин",1),o[3]||(o[3]=t("span",{class:"text-xs text-gray-500"},"•",-1)),t("span",_e,r(e.level),1)]),t("h3",ve,r(e.title),1),t("p",xe,r(e.shortDescription),1),t("div",be,[t("img",{src:e.instructor.avatar,alt:e.instructor.name,class:"w-6 h-6 rounded-full mr-2"},null,8,he),t("span",ye,r(e.instructor.name),1)]),t("div",fe,[t("div",ke,[o[4]||(o[4]=t("span",{class:"text-yellow-400"},"⭐",-1)),t("span",Ce,r(e.rating),1)]),t("div",we,[L(d,{to:`/courses/${e.id}`,class:"text-blue-600 hover:text-blue-700 text-sm font-medium"},{default:D(()=>o[5]||(o[5]=[h(" Подробнее ")])),_:2},1032,["to"]),a.value==="enrolled"||a.value==="in_progress"?(n(),l("button",{key:0,onClick:F=>z(e),class:"bg-blue-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-blue-700"},r(((P=i(e.id))==null?void 0:P.progressPercentage)===0?"Начать":"Продолжить"),9,$e)):a.value==="completed"?(n(),l("button",{key:1,onClick:F=>A(e),class:"bg-gray-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-gray-700"}," Повторить ",8,Pe)):y("",!0)])])])])}),128))]))])}}}),De=H(Me,[["__scopeId","data-v-447aabdc"]]);export{De as default};
//# sourceMappingURL=MyCourses-0tR6Pcp3.js.map
