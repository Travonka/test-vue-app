import{f as h,b as x,e as w,I as k,c as r,g as e,j as i,t as c,B as C,u as a,w as S,C as V,h as f,a as L,p as B,r as E,o as n}from"./vendor-DPs9fwmF.js";import{u as I}from"./index-CJuKCETt.js";const N={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},R={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},j={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},P={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-6"},T={class:"flex"},D={class:"ml-3"},M={class:"mt-2 text-sm"},U={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},q={class:"mt-1"},A=["disabled"],F=["disabled"],$={key:0,class:"mr-2"},z={class:"mt-6 text-center"},G={key:2,class:"mt-6 text-center"},H=["disabled"],Q=h({__name:"ForgotPassword",setup(J){const s=I(),o=x(""),u=x(!1),l=x(0);let d=null;const p=w(()=>o.value&&o.value.includes("@")),v=async()=>{if(p.value)try{await s.resetPassword(o.value),u.value=!0,b()}catch(m){console.error("Reset password failed:",m)}},g=async()=>{if(!(l.value>0))try{await s.resetPassword(o.value),b()}catch(m){console.error("Resend failed:",m)}},b=()=>{l.value=60,d=setInterval(()=>{l.value--,l.value<=0&&(clearInterval(d),d=null)},1e3)};return k(()=>{d&&clearInterval(d)}),s.clearError(),(m,t)=>{const y=E("router-link");return n(),r("div",N,[t[5]||(t[5]=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("h2",{class:"mt-6 text-center text-3xl font-bold text-gray-900"}," Восстановление пароля "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Введите email адрес для получения ссылки восстановления ")],-1)),e("div",R,[e("div",j,[u.value?(n(),r("div",P,[e("div",T,[t[2]||(t[2]=e("div",{class:"flex-shrink-0"},[e("span",{class:"text-green-400"},"✓")],-1)),e("div",D,[t[1]||(t[1]=e("h3",{class:"text-sm font-medium"}," Письмо отправлено! ",-1)),e("div",M,[e("p",null," Мы отправили ссылку для восстановления пароля на "+c(o.value)+". Проверьте почтовый ящик и следуйте инструкциям в письме. ",1)])])])])):i("",!0),u.value?i("",!0):(n(),r("form",{key:1,class:"space-y-6",onSubmit:C(v,["prevent"])},[a(s).error?(n(),r("div",U,c(a(s).error),1)):i("",!0),e("div",null,[t[3]||(t[3]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email адрес ",-1)),e("div",q,[S(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=_=>o.value=_),class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"your.email@example.com",disabled:a(s).isLoading},null,8,A),[[V,o.value]])])]),e("div",null,[e("button",{type:"submit",disabled:a(s).isLoading||!p.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a(s).isLoading?(n(),r("span",$,"⏳")):i("",!0),f(" "+c(a(s).isLoading?"Отправка...":"Отправить ссылку"),1)],8,F)])],32)),e("div",z,[L(y,{to:"/login",class:"text-sm text-blue-600 hover:text-blue-500 font-medium"},{default:B(()=>t[4]||(t[4]=[f(" ← Вернуться к входу ")])),_:1})]),u.value?(n(),r("div",G,[e("button",{onClick:g,disabled:a(s).isLoading||l.value>0,class:"text-sm text-blue-600 hover:text-blue-500 font-medium disabled:text-gray-400 disabled:cursor-not-allowed"},c(l.value>0?`Повторить через ${l.value}с`:"Отправить ещё раз"),9,H)])):i("",!0)])])])}}});export{Q as default};
//# sourceMappingURL=ForgotPassword-kGdTfS9Y.js.map
