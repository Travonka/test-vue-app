import{e as K,b as y,I as H,r as c,x as O,J as W,c as i,f as e,g as v,h as S,w as V,m as $,i as X,t as a,K as Y,F as Z,s as ee,j as w,G as te,v as j,l as se,o as r}from"./vendor-BLqVYaau.js";import{q as le}from"./index-D74GUZbf.js";const oe={class:"min-h-screen bg-gray-50"},ae={class:"bg-white shadow-sm border-b"},ie={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},re={class:"flex items-center justify-between py-4"},ne={class:"flex items-center space-x-4"},ue={class:"text-lg font-medium text-gray-900"},de={key:0,class:"flex items-center space-x-4"},ce={key:0,class:"text-sm text-gray-600"},ve={class:"text-sm text-gray-500"},pe={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ye={key:0,class:"flex justify-center py-12"},me={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200"},ge={class:"p-6 border-b border-gray-200"},xe={class:"flex items-center justify-between mb-2"},be={class:"text-sm text-gray-500"},_e={class:"w-full bg-gray-200 rounded-full h-2"},he={class:"p-6"},fe={key:0,class:"space-y-6"},we={class:"text-xl font-medium text-gray-900 mb-4"},ke={class:"text-sm text-gray-500 mb-6"},qe={key:0},ze={class:"space-y-3"},Qe=["type","name","value"],Ae={class:"text-gray-900"},Ce={key:1},Ie={key:2},Le={class:"bg-gray-900 rounded-lg p-4"},Se={class:"px-6 py-4 border-t border-gray-200 flex justify-between"},Ve=["disabled"],$e=["disabled"],je={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200"},Te={class:"p-6 text-center"},Fe={class:"text-6xl mb-4"},Pe={class:"text-2xl font-bold text-gray-900 mb-2"},Me={class:"text-gray-600 mb-6"},Ne={class:"bg-gray-50 rounded-lg p-6 mb-6"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center"},Be={class:"text-2xl font-bold text-blue-600"},De={class:"text-2xl font-bold text-gray-600"},Ee={class:"text-2xl font-bold text-purple-600"},Re={class:"flex justify-center space-x-4"},He=K({__name:"QuizPage",setup(Ge){const k=H(),T=se(),h=y(()=>k.params.courseId),F=y(()=>k.params.quizId),f=c(!0),m=c(!1),g=c(!1),l=c(null),d=c(null),u=c(0),n=c({}),x=c(0);let b=null;const o=y(()=>l.value?l.value.questions[u.value]:null),P=y(()=>{if(!o.value)return!1;const t=n.value[o.value.id];return o.value.type==="multiple_choice"?Array.isArray(t)&&t.length>0:t!=null&&t!==""}),q=y(()=>l.value?l.value.questions.every(t=>{const s=n.value[t.id];return t.type==="multiple_choice"?Array.isArray(s)&&s.length>0:s!=null&&s!==""}):!1),M=y(()=>d.value?d.value.answers.filter(t=>t.isCorrect).length:0),N=t=>({multiple_choice:"–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä",single_choice:"–û–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä",text:"–¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç",code:"–ö–æ–¥"})[t]||t,U=t=>{const s=Math.floor(t/60),_=t%60;return`${s}:${_.toString().padStart(2,"0")}`},z=()=>{var t;(t=l.value)!=null&&t.timeLimit&&(x.value=l.value.timeLimit*60,b=setInterval(()=>{x.value--,x.value<=0&&A()},1e3))},Q=()=>{b&&(clearInterval(b),b=null)},B=()=>{var t;u.value<(((t=l.value)==null?void 0:t.questions.length)||0)-1&&u.value++},D=()=>{u.value>0&&u.value--},A=async()=>{if(!(!l.value||!q.value||m.value)){m.value=!0,Q();try{const t=l.value.questions.map(s=>({questionId:s.id,answer:n.value[s.id]}));d.value=await le.submitQuiz(l.value.id,t),g.value=!0}catch(t){console.error("Failed to submit quiz:",t)}finally{m.value=!1}}},E=()=>{g.value=!1,d.value=null,u.value=0,n.value={},l.value&&l.value.questions.forEach(t=>{t.type==="multiple_choice"&&(n.value[t.id]=[])}),z()},R=async()=>{f.value=!0;try{l.value={id:F.value,title:"–û—Å–Ω–æ–≤—ã Python",timeLimit:30,passingScore:70,questions:[{id:"1",question:"–ö–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö —è–≤–ª—è–µ—Ç—Å—è –∏–∑–º–µ–Ω—è–µ–º—ã–º –≤ Python?",type:"single_choice",options:["str","tuple","list","int"],correctAnswer:"list",points:10},{id:"2",question:"–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤ Python:",type:"multiple_choice",options:["[]","list()","new List()","{1, 2, 3}"],correctAnswer:["[]","list()"],points:15},{id:"3",question:"–û–±—ä—è—Å–Ω–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É == –∏ is –≤ Python:",type:"text",correctAnswer:"== —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, is —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–æ–≤",points:20}]},l.value.questions.forEach(t=>{t.type==="multiple_choice"&&(n.value[t.id]=[])}),z()}catch(t){console.error("Failed to load quiz:",t),T.push(`/courses/${h.value}`)}finally{f.value=!1}};return O(()=>{R()}),W(()=>{Q()}),(t,s)=>{var C,I,L;const _=X("router-link");return r(),i("div",oe,[e("div",ae,[e("div",ie,[e("div",re,[e("div",ne,[S(_,{to:`/courses/${h.value}`,class:"text-gray-400 hover:text-gray-600"},{default:V(()=>s[3]||(s[3]=[$(" ‚Üê –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å—É ")])),_:1},8,["to"]),e("div",null,[e("h1",ue,a((C=l.value)==null?void 0:C.title),1),s[4]||(s[4]=e("p",{class:"text-sm text-gray-500"},"–ö–≤–∏–∑",-1))])]),l.value&&!g.value?(r(),i("div",de,[l.value.timeLimit&&x.value>0?(r(),i("div",ce," ‚è∞ "+a(U(x.value)),1)):v("",!0),e("div",ve,a(u.value+1)+" –∏–∑ "+a(l.value.questions.length),1)])):v("",!0)])])]),e("div",pe,[f.value?(r(),i("div",ye,s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):l.value&&!g.value?(r(),i("div",me,[e("div",ge,[e("div",xe,[s[6]||(s[6]=e("span",{class:"text-sm font-medium text-gray-700"},"–ü—Ä–æ–≥—Ä–µ—Å—Å",-1)),e("span",be,a(u.value+1)+"/"+a(l.value.questions.length),1)]),e("div",_e,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Y({width:`${(u.value+1)/l.value.questions.length*100}%`})},null,4)])]),e("div",he,[o.value?(r(),i("div",fe,[e("div",null,[e("h2",we,a(o.value.question),1),e("div",ke," –¢–∏–ø: "+a(N(o.value.type))+" ‚Ä¢ –ë–∞–ª–ª–æ–≤: "+a(o.value.points),1)]),o.value.type==="multiple_choice"||o.value.type==="single_choice"?(r(),i("div",qe,[e("div",ze,[(r(!0),i(Z,null,ee(o.value.options,(p,G)=>(r(),i("label",{key:G,class:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"},[w(e("input",{type:o.value.type==="multiple_choice"?"checkbox":"radio",name:`question-${o.value.id}`,value:p,"onUpdate:modelValue":s[0]||(s[0]=J=>n.value[o.value.id]=J),class:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,Qe),[[te,n.value[o.value.id]]]),e("span",Ae,a(p),1)]))),128))])])):o.value.type==="text"?(r(),i("div",Ce,[w(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=p=>n.value[o.value.id]=p),rows:"4",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."},null,512),[[j,n.value[o.value.id]]])])):o.value.type==="code"?(r(),i("div",Ie,[e("div",Le,[w(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=p=>n.value[o.value.id]=p),rows:"8",class:"w-full bg-transparent text-green-400 font-mono text-sm border-none outline-none resize-none",placeholder:"// –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å..."},null,512),[[j,n.value[o.value.id]]])])])):v("",!0)])):v("",!0)]),e("div",Se,[u.value>0?(r(),i("button",{key:0,onClick:D,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π ")):v("",!0),u.value<l.value.questions.length-1?(r(),i("button",{key:1,onClick:B,disabled:!P.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed ml-auto"}," –°–ª–µ–¥—É—é—â–∏–π ‚Üí ",8,Ve)):(r(),i("button",{key:2,onClick:A,disabled:!q.value||m.value,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed ml-auto"},a(m.value?"–û—Ç–ø—Ä–∞–≤–∫–∞...":"–ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–≤–∏–∑"),9,$e))])])):g.value&&d.value?(r(),i("div",je,[e("div",Te,[e("div",Fe,a(d.value.passed?"üéâ":"üòû"),1),e("h2",Pe,a(d.value.passed?"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!":"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑"),1),e("p",Me,a(d.value.passed?"–í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ –∫–≤–∏–∑!":"–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–µ –Ω–∞–±—Ä–∞–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è."),1),e("div",Ne,[e("div",Ue,[e("div",null,[e("div",Be,a(d.value.score)+"%",1),s[7]||(s[7]=e("div",{class:"text-sm text-gray-500"},"–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç",-1))]),e("div",null,[e("div",De,a((I=l.value)==null?void 0:I.passingScore)+"%",1),s[8]||(s[8]=e("div",{class:"text-sm text-gray-500"},"–ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª",-1))]),e("div",null,[e("div",Ee,a(M.value)+"/"+a((L=l.value)==null?void 0:L.questions.length),1),s[9]||(s[9]=e("div",{class:"text-sm text-gray-500"},"–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤",-1))])])]),e("div",Re,[S(_,{to:`/courses/${h.value}`,class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:V(()=>s[10]||(s[10]=[$(" –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫—É—Ä—Å—É ")])),_:1},8,["to"]),d.value.passed?v("",!0):(r(),i("button",{key:0,onClick:E,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑ "))])])])):v("",!0)])])}}});export{He as default};
//# sourceMappingURL=QuizPage-CRMHpfQq.js.map
