import{e as h,r as x,b as w,J as k,c as a,f as e,g as i,t as c,E as C,u as r,j as S,v as V,m as f,h as E,w as L,i as N,o as n}from"./vendor-BLqVYaau.js";import{u as R}from"./index-DnAZExV4.js";const j={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},B={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},I={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},P={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-6"},T={class:"flex"},D={class:"ml-3"},M={class:"mt-2 text-sm"},U={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},q={class:"mt-1"},A=["disabled"],F=["disabled"],J={key:0,class:"mr-2"},$={class:"mt-6 text-center"},z={key:2,class:"mt-6 text-center"},G=["disabled"],Q=h({__name:"ForgotPassword",setup(H){const s=R(),o=x(""),u=x(!1),l=x(0);let d=null;const v=w(()=>o.value&&o.value.includes("@")),p=async()=>{if(v.value)try{await s.resetPassword(o.value),u.value=!0,b()}catch(m){console.error("Reset password failed:",m)}},g=async()=>{if(!(l.value>0))try{await s.resetPassword(o.value),b()}catch(m){console.error("Resend failed:",m)}},b=()=>{l.value=60,d=setInterval(()=>{l.value--,l.value<=0&&(clearInterval(d),d=null)},1e3)};return k(()=>{d&&clearInterval(d)}),s.clearError(),(m,t)=>{const y=N("router-link");return n(),a("div",j,[t[5]||(t[5]=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("h2",{class:"mt-6 text-center text-3xl font-bold text-gray-900"}," Восстановление пароля "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Введите email адрес для получения ссылки восстановления ")],-1)),e("div",B,[e("div",I,[u.value?(n(),a("div",P,[e("div",T,[t[2]||(t[2]=e("div",{class:"flex-shrink-0"},[e("span",{class:"text-green-400"},"✓")],-1)),e("div",D,[t[1]||(t[1]=e("h3",{class:"text-sm font-medium"}," Письмо отправлено! ",-1)),e("div",M,[e("p",null," Мы отправили ссылку для восстановления пароля на "+c(o.value)+". Проверьте почтовый ящик и следуйте инструкциям в письме. ",1)])])])])):i("",!0),u.value?i("",!0):(n(),a("form",{key:1,class:"space-y-6",onSubmit:C(p,["prevent"])},[r(s).error?(n(),a("div",U,c(r(s).error),1)):i("",!0),e("div",null,[t[3]||(t[3]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email адрес ",-1)),e("div",q,[S(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=_=>o.value=_),class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"your.email@example.com",disabled:r(s).isLoading},null,8,A),[[V,o.value]])])]),e("div",null,[e("button",{type:"submit",disabled:r(s).isLoading||!v.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[r(s).isLoading?(n(),a("span",J,"⏳")):i("",!0),f(" "+c(r(s).isLoading?"Отправка...":"Отправить ссылку"),1)],8,F)])],32)),e("div",$,[E(y,{to:"/login",class:"text-sm text-blue-600 hover:text-blue-500 font-medium"},{default:L(()=>t[4]||(t[4]=[f(" ← Вернуться к входу ")])),_:1})]),u.value?(n(),a("div",z,[e("button",{onClick:g,disabled:r(s).isLoading||l.value>0,class:"text-sm text-blue-600 hover:text-blue-500 font-medium disabled:text-gray-400 disabled:cursor-not-allowed"},c(l.value>0?`Повторить через ${l.value}с`:"Отправить ещё раз"),9,G)])):i("",!0)])])])}}});export{Q as default};
//# sourceMappingURL=ForgotPassword-CRriH7U0.js.map
